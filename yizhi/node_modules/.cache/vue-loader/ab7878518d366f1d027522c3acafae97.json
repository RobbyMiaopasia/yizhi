{"remainingRequest":"D:\\疫知\\yizhi\\yizhi\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\疫知\\yizhi\\yizhi\\src\\components\\ProvinceMap.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\疫知\\yizhi\\yizhi\\src\\components\\ProvinceMap.vue","mtime":1630459890498},{"path":"D:\\疫知\\yizhi\\yizhi\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\疫知\\yizhi\\yizhi\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\疫知\\yizhi\\yizhi\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\疫知\\yizhi\\yizhi\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAicHJvdmluY2VtYXAiLA0KICBwcm9wczogWyJwcm92aW5jZU5hbWUiLCAicHJvdmluY2VQYXRoIiwgInByb3ZpbmNlVGl0bGUiXSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbWFwOiAiIiwNCiAgICAgIG15Q2hhcnQ6ICIiLA0KICAgICAgZWNoYXJ0czogIiIsDQogICAgICBtYXBEYXRhOiAiIiwNCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuaW5pdEVjaGFydE1hcCgpOw0KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCB0aGlzLnNjcmVlbkFkYXB0ZXIpOw0KICB9LA0KDQogIGJlZm9yZVVwZGF0ZSgpIHsNCiAgICB0aGlzLnNjcmVlbkFkYXB0ZXIoKTsNCiAgfSwNCiAgZGVzdHJveWVkKCkgew0KICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJyZXNpemUiLCB0aGlzLnNjcmVlbkFkYXB0ZXIpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy/ojrflj5blnLDlm77nn6Lph48NCiAgICBhc3luYyBnZXRNYXAoKSB7DQogICAgICB2YXIgUE1hcCA9IGF3YWl0IGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4MDgxIiArIHRoaXMucHJvdmluY2VQYXRoKTsNCiAgICAgIHRoaXMubWFwID0gUE1hcC5kYXRhOw0KICAgIH0sDQogICAgYXN5bmMgaW5pdEVjaGFydE1hcCgpIHsNCiAgICAgIGF3YWl0IHRoaXMuZ2V0TWFwKCk7DQogICAgICBsZXQgYWxsRGF0YSA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgiL3AiKTsNCiAgICAgIGFsbERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFsbERhdGEuZGF0YSkpOw0KICAgICAgdGhpcy5lY2hhcnRzID0gcmVxdWlyZSgiZWNoYXJ0cyIpOw0KICAgICAgdGhpcy5teUNoYXJ0ID0gdGhpcy5lY2hhcnRzLmluaXQodGhpcy4kcmVmcy5wcm9tYXBfcmVmLCAiY2hhbGsiKTsNCiAgICAgIC8v6I635Y+W55yB5Lu95Zyw5Zu+55+i6YeP5pWw5o2uDQogICAgICB0aGlzLmVjaGFydHMucmVnaXN0ZXJNYXAodGhpcy5wcm92aW5jZU5hbWUsIHRoaXMubWFwKTsNCiAgICAgIGFsbERhdGEubWFwKGZ1bmN0aW9uIChpKSB7DQogICAgICAgIGkubmFtZSA9IGkudWFOYW1lOw0KICAgICAgICBpLnZhbHVlID0gaS50b3RhbENvbmZpcm07DQogICAgICAgIHJldHVybiBpOw0KICAgICAgfSk7DQogICAgICBsZXQgb3B0aW9ucyA9IHsNCiAgICAgICAgdGl0bGU6IHsNCiAgICAgICAgICB0ZXh0OiBgJHt0aGlzLnByb3ZpbmNlVGl0bGV9546w5a2Y56Gu6K+K5YiG5biD5Zu+YCwNCiAgICAgICAgICBsZWZ0OiAiY2VudGVyIiwNCiAgICAgICAgICB0b3A6IDIwLA0KICAgICAgICB9LA0KICAgICAgICB0b29sdGlwOiB7DQogICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7DQogICAgICAgICAgICBpZiAocGFyYW1zLmRhdGEpIHsNCiAgICAgICAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAgICAgICBwYXJhbXMubmFtZSArDQogICAgICAgICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICAgICAgICAi57Sv6K6h56Gu6K+KOiIgKw0KICAgICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnRvdGFsQ29uZmlybSArDQogICAgICAgICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICAgICAgICAi546w5a2Y56Gu6K+KOiIgKw0KICAgICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnRvdGFsTm93Q29uZmlybSArDQogICAgICAgICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICAgICAgICAi57Sv6K6h5rK75oSIOiIgKw0KICAgICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnRvdGFsSGVhbCArDQogICAgICAgICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICAgICAgICAi57Sv6K6h5q275LqhOiIgKw0KICAgICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnRvdGFsRGVhZCArDQogICAgICAgICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICAgICAgICAi5LuK5pel5paw5aKeOiIgKw0KICAgICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnRvZGF5Q29uZmlybQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgcmV0dXJuIDxwPuaaguaXoOivpeWfjuW4guaVsOaNrjwvcD47DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgfSwNCiAgICAgICAgdG9vbGJveDogew0KICAgICAgICAgIHNob3c6IHRydWUsDQogICAgICAgICAgZmVhdHVyZTogew0KICAgICAgICAgICAgc2F2ZUFzSW1hZ2U6IHsNCiAgICAgICAgICAgICAgcGl4ZWxSYXRpbzogNCwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgfSwNCiAgICAgICAgdmlzdWFsTWFwOiB7DQogICAgICAgICAgaXRlbUhpZ2h0OiAxMCwNCiAgICAgICAgICBpdGVtV2lkdGg6IDE1LA0KICAgICAgICAgIHRleHRHYXA6IDEwLA0KICAgICAgICAgIHNob3c6IHRydWUsDQogICAgICAgICAgbGVmdDogIjc1JSIsDQogICAgICAgICAgYm90dG9tOiAiNSUiLA0KICAgICAgICAgIHNob3dMYWJlbDogdHJ1ZSwNCiAgICAgICAgICBwaWVjZXM6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgZ3RlOiAxMDAwLA0KICAgICAgICAgICAgICBsYWJlbDogIj49IDEwMDAiLA0KICAgICAgICAgICAgICBjb2xvcjogIiMzYzU3Y2UiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgZ3RlOiA1MDAsDQogICAgICAgICAgICAgIGx0OiA5OTksDQogICAgICAgICAgICAgIGxhYmVsOiAiNTAwIC0gOTk5IiwNCiAgICAgICAgICAgICAgY29sb3I6ICIjNmY4M2RiIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGd0ZTogMTAwLA0KICAgICAgICAgICAgICBsdDogNDk5LA0KICAgICAgICAgICAgICBsYWJlbDogIjEwMCAtIDQ5OSIsDQogICAgICAgICAgICAgIGNvbG9yOiAiIzlmYWNlNyIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBndGU6IDEwLA0KICAgICAgICAgICAgICBsdDogOTksDQogICAgICAgICAgICAgIGxhYmVsOiAiMTAgLSA5OSIsDQogICAgICAgICAgICAgIGNvbG9yOiAiI2I4YzRmNSIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBsdDogMTAsDQogICAgICAgICAgICAgIGxhYmVsOiAiPDEwIiwNCiAgICAgICAgICAgICAgY29sb3I6ICIjZDJkOGYwIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgXSwNCiAgICAgICAgfSwNCiAgICAgICAgc2VyaWVzOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogIm1hcCIsDQogICAgICAgICAgICBtYXA6IHRoaXMucHJvdmluY2VOYW1lLA0KICAgICAgICAgICAgbGFiZWw6IHsNCiAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwNCiAgICAgICAgICAgICAgZm9udFNpemU6ICIxNCIsDQogICAgICAgICAgICAgIGNvbG9yOiAicmdiYSgwLDAsMCwwLjcpIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBlbXBoYXNpczogew0KICAgICAgICAgICAgICBib3JkZXJDb2xvcjogInJnYmEoMCwgMCwgMCwgMC4yKSIsDQogICAgICAgICAgICAgIGl0ZW1TdHlsZTogew0KICAgICAgICAgICAgICAgIGFyZWFDb2xvcjogIiNmMmQ1YWQiLA0KICAgICAgICAgICAgICAgIHNoYWRvd09mZnNldFg6IDAsDQogICAgICAgICAgICAgICAgc2hhZG93T2Zmc2V0WTogMCwNCiAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMCwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBkYXRhOiBhbGxEYXRhLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICB9Ow0KDQogICAgICB0aGlzLm15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbnMpOw0KICAgIH0sDQogICAgLy/pgILphY3liIbovqjnjocNCiAgICBhc3luYyBzY3JlZW5BZGFwdGVyKCkgew0KICAgICAgY29uc3QgdGl0bGVGb250U2l6ZSA9ICh0aGlzLiRyZWZzLnByb21hcF9yZWYub2Zmc2V0V2lkdGggLyAxMDApICogMy40Ow0KICAgICAgbGV0IGFkYXB0ZXJPcHRpb24gPSB7DQogICAgICAgIHRpdGxlOiB7DQogICAgICAgICAgdGV4dFN0eWxlOiB7DQogICAgICAgICAgICBmb250U2l6ZTogdGl0bGVGb250U2l6ZSwNCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgfTsNCiAgICAgIHRoaXMubXlDaGFydC5zZXRPcHRpb24oYWRhcHRlck9wdGlvbik7DQogICAgICB0aGlzLm15Q2hhcnQucmVzaXplKCk7DQogICAgfSwNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBwcm92aW5jZU5hbWUoKSB7DQogICAgICB0aGlzLmluaXRFY2hhcnRNYXAoKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["ProvinceMap.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProvinceMap.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"com-container\">\r\n    <div class=\"com-chart\" id=\"map_ref\" ref=\"promap_ref\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"provincemap\",\r\n  props: [\"provinceName\", \"provincePath\", \"provinceTitle\"],\r\n  data() {\r\n    return {\r\n      map: \"\",\r\n      myChart: \"\",\r\n      echarts: \"\",\r\n      mapData: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initEchartMap();\r\n    window.addEventListener(\"resize\", this.screenAdapter);\r\n  },\r\n\r\n  beforeUpdate() {\r\n    this.screenAdapter();\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener(\"resize\", this.screenAdapter);\r\n  },\r\n  methods: {\r\n    //获取地图矢量\r\n    async getMap() {\r\n      var PMap = await axios.get(\"http://localhost:8081\" + this.provincePath);\r\n      this.map = PMap.data;\r\n    },\r\n    async initEchartMap() {\r\n      await this.getMap();\r\n      let allData = await this.$axios.get(\"/p\");\r\n      allData = JSON.parse(JSON.stringify(allData.data));\r\n      this.echarts = require(\"echarts\");\r\n      this.myChart = this.echarts.init(this.$refs.promap_ref, \"chalk\");\r\n      //获取省份地图矢量数据\r\n      this.echarts.registerMap(this.provinceName, this.map);\r\n      allData.map(function (i) {\r\n        i.name = i.uaName;\r\n        i.value = i.totalConfirm;\r\n        return i;\r\n      });\r\n      let options = {\r\n        title: {\r\n          text: `${this.provinceTitle}现存确诊分布图`,\r\n          left: \"center\",\r\n          top: 20,\r\n        },\r\n        tooltip: {\r\n          formatter: function (params) {\r\n            if (params.data) {\r\n              return (\r\n                params.name +\r\n                \"<br>\" +\r\n                \"累计确诊:\" +\r\n                params.data.totalConfirm +\r\n                \"<br>\" +\r\n                \"现存确诊:\" +\r\n                params.data.totalNowConfirm +\r\n                \"<br>\" +\r\n                \"累计治愈:\" +\r\n                params.data.totalHeal +\r\n                \"<br>\" +\r\n                \"累计死亡:\" +\r\n                params.data.totalDead +\r\n                \"<br>\" +\r\n                \"今日新增:\" +\r\n                params.data.todayConfirm\r\n              );\r\n            } else {\r\n              return <p>暂无该城市数据</p>;\r\n            }\r\n          },\r\n        },\r\n        toolbox: {\r\n          show: true,\r\n          feature: {\r\n            saveAsImage: {\r\n              pixelRatio: 4,\r\n            },\r\n          },\r\n        },\r\n        visualMap: {\r\n          itemHight: 10,\r\n          itemWidth: 15,\r\n          textGap: 10,\r\n          show: true,\r\n          left: \"75%\",\r\n          bottom: \"5%\",\r\n          showLabel: true,\r\n          pieces: [\r\n            {\r\n              gte: 1000,\r\n              label: \">= 1000\",\r\n              color: \"#3c57ce\",\r\n            },\r\n            {\r\n              gte: 500,\r\n              lt: 999,\r\n              label: \"500 - 999\",\r\n              color: \"#6f83db\",\r\n            },\r\n            {\r\n              gte: 100,\r\n              lt: 499,\r\n              label: \"100 - 499\",\r\n              color: \"#9face7\",\r\n            },\r\n            {\r\n              gte: 10,\r\n              lt: 99,\r\n              label: \"10 - 99\",\r\n              color: \"#b8c4f5\",\r\n            },\r\n            {\r\n              lt: 10,\r\n              label: \"<10\",\r\n              color: \"#d2d8f0\",\r\n            },\r\n          ],\r\n        },\r\n        series: [\r\n          {\r\n            type: \"map\",\r\n            map: this.provinceName,\r\n            label: {\r\n              show: true,\r\n              fontSize: \"14\",\r\n              color: \"rgba(0,0,0,0.7)\",\r\n            },\r\n            emphasis: {\r\n              borderColor: \"rgba(0, 0, 0, 0.2)\",\r\n              itemStyle: {\r\n                areaColor: \"#f2d5ad\",\r\n                shadowOffsetX: 0,\r\n                shadowOffsetY: 0,\r\n                borderWidth: 0,\r\n              },\r\n            },\r\n            data: allData,\r\n          },\r\n        ],\r\n      };\r\n\r\n      this.myChart.setOption(options);\r\n    },\r\n    //适配分辨率\r\n    async screenAdapter() {\r\n      const titleFontSize = (this.$refs.promap_ref.offsetWidth / 100) * 3.4;\r\n      let adapterOption = {\r\n        title: {\r\n          textStyle: {\r\n            fontSize: titleFontSize,\r\n          },\r\n        },\r\n      };\r\n      this.myChart.setOption(adapterOption);\r\n      this.myChart.resize();\r\n    },\r\n  },\r\n  watch: {\r\n    provinceName() {\r\n      this.initEchartMap();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}